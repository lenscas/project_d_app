
<style>

#cn-h1 {
    text-align: center;
}

.main-tekst {
    text-align: center;
}

.res-server {
    text-align: center;
    margin-top: 20px;
}

.main-tekst a {
    text-decoration: none;
}

.main-tekst a:hover {
    color: green;
}

#sp-btn {
    margin-bottom: 10px;
}

.disconnected {
    color: red;
}

.connected {
    color: green;
}

</style>
    
<div class="row menu_page">
    <div class="container">
        <h1 id="cn-h1">Status</h1>
        <div class="main-tekst">
            <p><a href="#">Speaker:</a> <span class="sp-s disconnected">Not Connected</span></p>
            <button class="btn btn-primary" id="sp-btn">Connect</button> 
            <br>
            <p><a href="#">Light:</a> <span class="lp-s disconnected">Not Connected</span></p>
            <button class="btn btn-primary" id="lp-btn">Connect</button>
        </div>
        <div class="res-server">

        </div>     
    </div>
</div>
<menu/>
<script>

    pageController["connection"] = async function(){

        const res = await API.get("audio/playlist");
        const artist = res.currentSong.artist;
        const path = res.currentSong.path;
        const list_length = res.list.length;

        $("#sp-btn").on("click", function(){ 
            var text1 = $(".sp-s").text();
            if(text1 == "Not Connected") {
                $(".sp-s").text("Connected");
                $(".sp-s").toggleClass("connected disconnected");
                $("#sp-btn").text("Disconnect");
                $(".res-server").append("<h2>Now playing</h2>");
                $(".res-server").append("<ul><li>Artist: " + artist + "</li></ul>" );
                $(".res-server").append("<ul><li>Path: " + path + "</li></ul>" );


                for(i = 1;  i <= list_length; i++) {
                    $(".res-server").append("<h2>Playlist</h2>");
                    $(".res-server").append("<ul><li>"+ [i] + "." + " Artist: " + artist + " - " + "Path: "+ path +"</li></ul>" );
                }

            } else  {
                $(".sp-s").text("Not Connected");
                $(".sp-s").toggleClass("connected disconnected");
                $("#sp-btn").text("Connect");
                $(".res-server").empty();
            }
        });

        $("#lp-btn").on("click", function(){
            var text2 = $(".lp-s").text();
            if(text2 == "Not Connected") {
                $(".lp-s").text("Connected");
                $(".lp-s").toggleClass("connected disconnected");
                $("#lp-btn").text("Disconnect");

            } else  {
                $(".lp-s").text("Not Connected");
                $(".lp-s").toggleClass("connected disconnected");
                $("#lp-btn").text("Connect");
            }
        });
    }

</script>